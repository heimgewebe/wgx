ai_context_version: 1.0

project:
  name: contracts
  summary: Central contract repo providing JSON/Proto schemas and fixtures.
  role: schema_contract_provider
  primary_language: mixed
  visibility: internal

dependencies:
  internal: []
  external:
    - name: ajv-cli
      version: "5.x"
    - name: buf
      note: for protobuf (optional)

architecture:
  entrypoints:
    - json/
    - proto/
  key_paths:
    - path: json/
      purpose: JSON Schemas
    - path: proto/
      purpose: Protobuf IDL
    - path: fixtures/
      purpose: Golden samples for validation
  data_flow:
    input: change proposals via PR
    processing: guard checks + AJV validation
    output: pinned, versioned contracts for consumers

conventions:
  branching: "main, feature/*, hotfix/*"
  commit_prefix: "contracts"
  ci_platform: github_actions

documentation:
  adr: docs/adr/
  runbook: docs/runbook.md
  api_reference:
    - json/*
    - proto/*

ai_guidance:
  do:
    - never break schemas; use additive changes and/or new versions
    - validate JSONL fixtures with AJV; keep examples minimal but complete
    - keep file moves as renames (git mv) to preserve history
  dont:
    - change formats without version bump
