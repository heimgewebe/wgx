ai_context_version: 1.0

project:
  name: leitstand
  summary: Event ingest and processing hub.
  role: event_store_pipeline
  primary_language: rust
  visibility: internal

dependencies:
  internal:
    - name: contracts
      relationship: uses
      interface: json_schema | proto
    - name: heimlern
      relationship: provides
      interface: metrics | reports
    - name: wgx
      relationship: consumes
      interface: orchestration_cli
  external:
    - name: tokio
      version: "^1"
    - name: serde/serde_json
    - name: tracing

architecture:
  entrypoints:
    - src/main.rs
  key_paths:
    - path: src/ingest/
      purpose: HTTP ingest + validation
    - path: src/pipeline/
      purpose: event processing
  data_flow:
    input: "HTTP POST /ingest/*"
    processing: schema validation then pipelines
    output: storage + metrics

conventions:
  branching: "main, feature/*, hotfix/*"
  commit_prefix: "leitstand"
  ci_platform: "github_actions"

documentation:
  adr: docs/adr/
  runbook: docs/runbook.md

ai_guidance:
  do:
    - use contracts repo for validation; reject non-conforming events
    - prefer structured logs via tracing; ensure backpressure handling
  dont:
    - introduce println! in hot paths
