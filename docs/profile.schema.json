{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "WGX v1 Profile",
  "type": "object",
  "required": ["profile", "description", "class", "tasks"],
  "properties": {
    "profile": {
      "type": "string",
      "description": "Logical name of the repository"
    },
    "description": {
      "type": "string",
      "description": "Human-readable overview text"
    },
    "class": {
      "type": "string",
      "description": "Fleet class (e.g. rust-service, rust-python-hybrid)"
    },
    "tasks": {
      "type": "object",
      "description": "Mapping of task names to shell snippets",
      "additionalProperties": {
        "type": "string"
      }
    },
    "wgx-version": {
      "type": "string",
      "description": "Semver range of minimum supported WGX features"
    },
    "requiredWgx": {
      "oneOf": [
        { "type": "string" },
        { "type": "object", "properties": { "range": { "type": "string" }, "min": { "type": "string" }, "caps": { "type": "array", "items": { "type": "string" } } } }
      ],
      "description": "Required WGX capability level"
    },
    "required-wgx": {
      "description": "Legacy alias for requiredWgx",
      "$ref": "#/properties/requiredWgx"
    },
    "lang": {
      "type": "array",
      "items": { "type": "string" },
      "description": "List of language tags"
    },
    "meta": {
      "type": "object",
      "description": "Structured metadata"
    },
    "wgx": {
      "type": "object",
      "properties": {
        "apiVersion": { "type": "string", "enum": ["v1", "v1.1"] }
      }
    }
  }
}
